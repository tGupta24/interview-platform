{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS/Desktop/Hackhazards%20AI/interview-platform/lib/actions/general.action.ts"],"sourcesContent":["\"use server\";\n\nimport { generateObject } from \"ai\";\nimport { groq } from \"@ai-sdk/groq\"; // ✅ use groq, not openai\n\nimport { db } from \"@/firebase/admin\";\nimport { feedbackSchema } from \"@/constants\";\n\nexport async function createFeedback(params: CreateFeedbackParams) {\n  const { interviewId, userId, transcript, feedbackId } = params;\n\n  try {\n    const formattedTranscript = transcript\n      .map(\n        (sentence: { role: string; content: string }) =>\n          `- ${sentence.role}: ${sentence.content}\\n`\n      )\n      .join(\"\");\n\n    // Universal system prompt that is no longer role-specific\n    const systemPrompt = `\n      You are an AI evaluator conducting a thorough analysis of a mock interview performance.\n      This evaluation is for a job interview, but the role is unspecified.\n      Please ensure that your analysis is detailed, constructive, and based on the following structured categories:\n      \n      Transcript:\n      ${formattedTranscript}\n\n      Evaluation Categories:\n      - **Communication Skills**: Evaluate the clarity of the candidate’s speech, articulation, structure of their responses, and overall communicative ability.\n      - **Technical Knowledge**: Assess the depth of their knowledge in relevant concepts and tools. For technical roles, focus on their problem-solving ability and familiarity with key technical terms.\n      - **Problem-Solving**: Rate their approach to solving problems, including critical thinking, creativity, and efficiency in resolving challenges.\n      - **Cultural & Role Fit**: How well does the candidate fit within the company’s values, work culture, and the requirements of the role? Look for alignment with the company’s expectations and goals.\n      - **Confidence & Clarity**: Assess the candidate’s confidence when responding to questions. Were they composed, clear, and direct?\n\n      If you notice any mistakes, weak areas, or areas for improvement, be specific and provide actionable feedback. Do not be lenient with the candidate; instead, offer valuable suggestions that will help them improve.\n      Remember: Be balanced in your assessment, giving due credit to the candidate's strengths while offering guidance on areas they could work on. \n    `;\n\n    const { object } = await generateObject({\n      model: groq(\"llama3-70b-8192\"),\n      schema: feedbackSchema,\n      prompt: systemPrompt,\n      system:\n        \"You are an experienced and impartial interviewer evaluating a mock interview performance. Your goal is to provide a thorough, actionable analysis.\",\n    });\n\n    const feedback = {\n      interviewId: interviewId,\n      userId: userId,\n      totalScore: object.totalScore,\n      categoryScores: object.categoryScores,\n      strengths: object.strengths,\n      areasForImprovement: object.areasForImprovement,\n      finalAssessment: object.finalAssessment,\n      createdAt: new Date().toISOString(),\n    };\n\n    let feedbackRef;\n\n    if (feedbackId) {\n      feedbackRef = db.collection(\"feedback\").doc(feedbackId);\n    } else {\n      feedbackRef = db.collection(\"feedback\").doc();\n    }\n\n    await feedbackRef.set(feedback);\n\n    return { success: true, feedbackId: feedbackRef.id };\n  } catch (error) {\n    console.error(\"Error saving feedback:\", error);\n    return { success: false };\n  }\n}\n\nexport async function getInterviewById(id: string): Promise<Interview | null> {\n  const interview = await db.collection(\"interviews\").doc(id).get();\n\n  return interview.data() as Interview | null;\n}\n\nexport async function getFeedbackByInterviewId(\n  params: GetFeedbackByInterviewIdParams\n): Promise<Feedback | null> {\n  const { interviewId, userId } = params;\n\n  const querySnapshot = await db\n    .collection(\"feedback\")\n    .where(\"interviewId\", \"==\", interviewId)\n    .where(\"userId\", \"==\", userId)\n    .limit(1)\n    .get();\n\n  if (querySnapshot.empty) return null;\n\n  const feedbackDoc = querySnapshot.docs[0];\n  return { id: feedbackDoc.id, ...feedbackDoc.data() } as Feedback;\n}\n\nexport async function getLatestInterviews(\n  params: GetLatestInterviewsParams\n): Promise<Interview[] | null> {\n  const { userId, limit = 20 } = params;\n\n  const interviews = await db\n    .collection(\"interviews\")\n    .orderBy(\"createdAt\", \"desc\")\n    .where(\"finalized\", \"==\", true)\n    .where(\"userId\", \"!=\", userId)\n    .limit(limit)\n    .get();\n\n  return interviews.docs.map((doc) => ({\n    id: doc.id,\n    ...doc.data(),\n  })) as Interview[];\n}\n\nexport async function getInterviewsByUserId(\n  userId: string\n): Promise<Interview[] | null> {\n  const interviews = await db\n    .collection(\"interviews\")\n    .where(\"userId\", \"==\", userId)\n    .orderBy(\"createdAt\", \"desc\")\n    .get();\n\n  return interviews.docs.map((doc) => ({\n    id: doc.id,\n    ...doc.data(),\n  })) as Interview[];\n}\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA,kQAAqC,yBAAyB;AAE9D;AACA;;;;;;;;;;;;AAEO,eAAe,eAAe,MAA4B;IAC/D,MAAM,EAAE,WAAW,EAAE,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG;IAExD,IAAI;QACF,MAAM,sBAAsB,WACzB,GAAG,CACF,CAAC,WACC,CAAC,EAAE,EAAE,SAAS,IAAI,CAAC,EAAE,EAAE,SAAS,OAAO,CAAC,EAAE,CAAC,EAE9C,IAAI,CAAC;QAER,0DAA0D;QAC1D,MAAM,eAAe,CAAC;;;;;;MAMpB,EAAE,oBAAoB;;;;;;;;;;;IAWxB,CAAC;QAED,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAA,GAAA,oJAAA,CAAA,iBAAc,AAAD,EAAE;YACtC,OAAO,CAAA,GAAA,qJAAA,CAAA,OAAI,AAAD,EAAE;YACZ,QAAQ,kHAAA,CAAA,iBAAc;YACtB,QAAQ;YACR,QACE;QACJ;QAEA,MAAM,WAAW;YACf,aAAa;YACb,QAAQ;YACR,YAAY,OAAO,UAAU;YAC7B,gBAAgB,OAAO,cAAc;YACrC,WAAW,OAAO,SAAS;YAC3B,qBAAqB,OAAO,mBAAmB;YAC/C,iBAAiB,OAAO,eAAe;YACvC,WAAW,IAAI,OAAO,WAAW;QACnC;QAEA,IAAI;QAEJ,IAAI,YAAY;YACd,cAAc,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,YAAY,GAAG,CAAC;QAC9C,OAAO;YACL,cAAc,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,YAAY,GAAG;QAC7C;QAEA,MAAM,YAAY,GAAG,CAAC;QAEtB,OAAO;YAAE,SAAS;YAAM,YAAY,YAAY,EAAE;QAAC;IACrD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO;YAAE,SAAS;QAAM;IAC1B;AACF;AAEO,eAAe,iBAAiB,EAAU;IAC/C,MAAM,YAAY,MAAM,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,cAAc,GAAG,CAAC,IAAI,GAAG;IAE/D,OAAO,UAAU,IAAI;AACvB;AAEO,eAAe,yBACpB,MAAsC;IAEtC,MAAM,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG;IAEhC,MAAM,gBAAgB,MAAM,iHAAA,CAAA,KAAE,CAC3B,UAAU,CAAC,YACX,KAAK,CAAC,eAAe,MAAM,aAC3B,KAAK,CAAC,UAAU,MAAM,QACtB,KAAK,CAAC,GACN,GAAG;IAEN,IAAI,cAAc,KAAK,EAAE,OAAO;IAEhC,MAAM,cAAc,cAAc,IAAI,CAAC,EAAE;IACzC,OAAO;QAAE,IAAI,YAAY,EAAE;QAAE,GAAG,YAAY,IAAI,EAAE;IAAC;AACrD;AAEO,eAAe,oBACpB,MAAiC;IAEjC,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,EAAE,GAAG;IAE/B,MAAM,aAAa,MAAM,iHAAA,CAAA,KAAE,CACxB,UAAU,CAAC,cACX,OAAO,CAAC,aAAa,QACrB,KAAK,CAAC,aAAa,MAAM,MACzB,KAAK,CAAC,UAAU,MAAM,QACtB,KAAK,CAAC,OACN,GAAG;IAEN,OAAO,WAAW,IAAI,CAAC,GAAG,CAAC,CAAC,MAAQ,CAAC;YACnC,IAAI,IAAI,EAAE;YACV,GAAG,IAAI,IAAI,EAAE;QACf,CAAC;AACH;AAEO,eAAe,sBACpB,MAAc;IAEd,MAAM,aAAa,MAAM,iHAAA,CAAA,KAAE,CACxB,UAAU,CAAC,cACX,KAAK,CAAC,UAAU,MAAM,QACtB,OAAO,CAAC,aAAa,QACrB,GAAG;IAEN,OAAO,WAAW,IAAI,CAAC,GAAG,CAAC,CAAC,MAAQ,CAAC;YACnC,IAAI,IAAI,EAAE;YACV,GAAG,IAAI,IAAI,EAAE;QACf,CAAC;AACH;;;IA3HsB;IAmEA;IAMA;IAkBA;IAmBA;;AA9GA,+OAAA;AAmEA,+OAAA;AAMA,+OAAA;AAkBA,+OAAA;AAmBA,+OAAA","debugId":null}},
    {"offset": {"line": 137, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS/Desktop/Hackhazards%20AI/interview-platform/.next-internal/server/app/%28root%29/interview/%5Bid%5D/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {signOut as '00793394b277d19552014378f1dc846c09cbfb2b57'} from 'ACTIONS_MODULE0'\nexport {isAuthenticated as '00a01d09c19859b55ae7ac996eee01b56c67a3c0a2'} from 'ACTIONS_MODULE0'\nexport {logout as '00b931587180d522de8c7c728e98901163fe528047'} from 'ACTIONS_MODULE0'\nexport {getCurrentUser as '00d5d013267b10086c3f61e76203aad2abc9e1bfaa'} from 'ACTIONS_MODULE0'\nexport {signIn as '4016cb4fb2494378f5ff0a0e5882c62c19a902d083'} from 'ACTIONS_MODULE0'\nexport {setSessionCookie as '4085e29fdf6b5b5276675b3979afc28fc980338cfb'} from 'ACTIONS_MODULE0'\nexport {signUp as '40da36582b074e7ac0a194925866a6a4ceb629df82'} from 'ACTIONS_MODULE0'\nexport {getFeedbackByInterviewId as '403be43bd0c53e40cf4761f885de6f80353a610284'} from 'ACTIONS_MODULE1'\nexport {createFeedback as '405ae410f7a02e1064647acfacc8397287216366d0'} from 'ACTIONS_MODULE1'\nexport {getLatestInterviews as '40615731fb3a565bd1d98fb28e67858d0e384d6add'} from 'ACTIONS_MODULE1'\nexport {getInterviewsByUserId as '40706ff48b44b892b2ef558cc4d4066f7b707648b0'} from 'ACTIONS_MODULE1'\nexport {getInterviewById as '40ec5fdd60422bd5f3fab3af141f575ca511792615'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AAOA","debugId":null}},
    {"offset": {"line": 257, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS/Desktop/Hackhazards%20AI/interview-platform/components/Agent.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/Agent.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/Agent.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAwR,GACrT,sDACA","debugId":null}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS/Desktop/Hackhazards%20AI/interview-platform/components/Agent.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/Agent.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/Agent.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAoQ,GACjS,kCACA","debugId":null}},
    {"offset": {"line": 285, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 295, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS/Desktop/Hackhazards%20AI/interview-platform/components/DisplayTechIcons.tsx"],"sourcesContent":["import Image from \"next/image\";\r\n\r\nimport { cn, getTechLogos } from \"@/lib/utils\";\r\n\r\nconst DisplayTechIcons = async ({ techStack }: TechIconProps) => {\r\n  const techIcons = await getTechLogos(techStack);\r\n\r\n  return (\r\n    <div className=\"flex flex-row\">\r\n      {techIcons.slice(0, 3).map(({ tech, url }, index) => (\r\n        <div\r\n          key={tech}\r\n          className={cn(\r\n            \"relative group bg-dark-300 rounded-full p-2 flex flex-center\",\r\n            index >= 1 && \"-ml-3\"\r\n          )}\r\n        >\r\n          <span className=\"tech-tooltip\">{tech}</span>\r\n\r\n          <Image\r\n            src={url}\r\n            alt={tech}\r\n            width={100}\r\n            height={100}\r\n            className=\"size-5\"\r\n          />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DisplayTechIcons;\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,mBAAmB,OAAO,EAAE,SAAS,EAAiB;IAC1D,MAAM,YAAY,MAAM,CAAA,GAAA,4GAAA,CAAA,eAAY,AAAD,EAAE;IAErC,qBACE,8OAAC;QAAI,WAAU;kBACZ,UAAU,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,sBACzC,8OAAC;gBAEC,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,gEACA,SAAS,KAAK;;kCAGhB,8OAAC;wBAAK,WAAU;kCAAgB;;;;;;kCAEhC,8OAAC,6HAAA,CAAA,UAAK;wBACJ,KAAK;wBACL,KAAK;wBACL,OAAO;wBACP,QAAQ;wBACR,WAAU;;;;;;;eAbP;;;;;;;;;;AAmBf;uCAEe","debugId":null}},
    {"offset": {"line": 349, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS/Desktop/Hackhazards%20AI/interview-platform/app/%28root%29/interview/%5Bid%5D/page.tsx"],"sourcesContent":["import Image from \"next/image\";\r\nimport { redirect } from \"next/navigation\";\r\n\r\nimport Agent from \"@/components/Agent\";\r\nimport { getRandomInterviewCover } from \"@/lib/utils\";\r\nimport {\r\n  getFeedbackByInterviewId,\r\n  getInterviewById,\r\n} from \"@/lib/actions/general.action\";\r\nimport { getCurrentUser } from \"@/lib/actions/auth.action\";\r\nimport DisplayTechIcons from \"@/components/DisplayTechIcons\";\r\n\r\nconst InterviewDetails = async ({ params }: RouteParams) => {\r\n  const { id } = params;\r\n\r\n  const user = await getCurrentUser();\r\n  const interview = await getInterviewById(id);\r\n  if (!interview) redirect(\"/\");\r\n\r\n  const feedback = await getFeedbackByInterviewId({\r\n    interviewId: id,\r\n    userId: user?.id!,\r\n  });\r\n\r\n  return (\r\n    <section className=\"max-w-5xl mx-auto px-6 py-10\">\r\n      {/* Interview Header */}\r\n      <div className=\"bg-white dark:bg-[#1e293b] shadow-lg rounded-2xl p-6 mb-8 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <Image\r\n            src={getRandomInterviewCover()}\r\n            alt=\"cover-image\"\r\n            width={60}\r\n            height={60}\r\n            className=\"rounded-full object-cover shadow-md\"\r\n          />\r\n          <div>\r\n            <h1 className=\"text-2xl font-semibold text-gray-800 dark:text-white capitalize\">\r\n              {interview.role} Interview\r\n            </h1>\r\n            <DisplayTechIcons techStack={interview.techstack} />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 text-sm font-medium px-4 py-2 rounded-full\">\r\n          {interview.type}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Interview Agent */}\r\n      <div className=\"bg-white dark:bg-[#0f172a] shadow-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-700\">\r\n        <Agent\r\n          userName={user?.name!}\r\n          userId={user?.id}\r\n          interviewId={id}\r\n          type=\"interview\"\r\n          questions={interview.questions}\r\n          feedbackId={feedback?.id}\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default InterviewDetails;\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAEA;AACA;AACA;AAIA;AACA;;;;;;;;;;;;;;AAEA,MAAM,mBAAmB,OAAO,EAAE,MAAM,EAAe;IACrD,MAAM,EAAE,EAAE,EAAE,GAAG;IAEf,MAAM,OAAO,MAAM,CAAA,GAAA,gIAAA,CAAA,iBAAc,AAAD;IAChC,MAAM,YAAY,MAAM,CAAA,GAAA,mIAAA,CAAA,mBAAgB,AAAD,EAAE;IACzC,IAAI,CAAC,WAAW,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IAEzB,MAAM,WAAW,MAAM,CAAA,GAAA,mIAAA,CAAA,2BAAwB,AAAD,EAAE;QAC9C,aAAa;QACb,QAAQ,MAAM;IAChB;IAEA,qBACE,8OAAC;QAAQ,WAAU;;0BAEjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,6HAAA,CAAA,UAAK;gCACJ,KAAK,CAAA,GAAA,4GAAA,CAAA,0BAAuB,AAAD;gCAC3B,KAAI;gCACJ,OAAO;gCACP,QAAQ;gCACR,WAAU;;;;;;0CAEZ,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;;4CACX,UAAU,IAAI;4CAAC;;;;;;;kDAElB,8OAAC,+HAAA,CAAA,UAAgB;wCAAC,WAAW,UAAU,SAAS;;;;;;;;;;;;;;;;;;kCAIpD,8OAAC;wBAAI,WAAU;kCACZ,UAAU,IAAI;;;;;;;;;;;;0BAKnB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,oHAAA,CAAA,UAAK;oBACJ,UAAU,MAAM;oBAChB,QAAQ,MAAM;oBACd,aAAa;oBACb,MAAK;oBACL,WAAW,UAAU,SAAS;oBAC9B,YAAY,UAAU;;;;;;;;;;;;;;;;;AAKhC;uCAEe","debugId":null}}]
}