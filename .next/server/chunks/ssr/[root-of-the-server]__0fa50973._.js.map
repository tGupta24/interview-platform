{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS/Desktop/Hackhazards%20AI/interview-platform/firebase/admin.ts"],"sourcesContent":["import { initializeApp, getApps, cert } from \"firebase-admin/app\";\r\nimport { getAuth } from \"firebase-admin/auth\";\r\nimport { getFirestore } from \"firebase-admin/firestore\";\r\n\r\n// Initialize Firebase Admin SDK\r\nfunction initFirebaseAdmin() {\r\n  const apps = getApps();\r\n\r\n  if (!apps.length) {\r\n    initializeApp({\r\n      credential: cert({\r\n        projectId: process.env.FIREBASE_PROJECT_ID,\r\n        clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\r\n        // Replace newlines in the private key\r\n        privateKey: process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\"),\r\n      }),\r\n    });\r\n  }\r\n\r\n  return {\r\n    auth: getAuth(),\r\n    db: getFirestore(),\r\n  };\r\n}\r\n\r\nexport const { auth, db } = initFirebaseAdmin();\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;;AAEA,gCAAgC;AAChC,SAAS;IACP,MAAM,OAAO,CAAA,GAAA,gJAAA,CAAA,UAAO,AAAD;IAEnB,IAAI,CAAC,KAAK,MAAM,EAAE;QAChB,CAAA,GAAA,gJAAA,CAAA,gBAAa,AAAD,EAAE;YACZ,YAAY,CAAA,GAAA,gJAAA,CAAA,OAAI,AAAD,EAAE;gBACf,WAAW,QAAQ,GAAG,CAAC,mBAAmB;gBAC1C,aAAa,QAAQ,GAAG,CAAC,qBAAqB;gBAC9C,sCAAsC;gBACtC,YAAY,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;YAChE;QACF;IACF;IAEA,OAAO;QACL,MAAM,CAAA,GAAA,kJAAA,CAAA,UAAO,AAAD;QACZ,IAAI,CAAA,GAAA,4JAAA,CAAA,eAAY,AAAD;IACjB;AACF;AAEO,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG","debugId":null}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS/Desktop/Hackhazards%20AI/interview-platform/lib/actions/auth.action.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { auth, db } from \"@/firebase/admin\";\r\nimport { cookies } from \"next/headers\";\r\n\r\n\r\n\r\n// Session duration (1 week)\r\nconst SESSION_DURATION = 60 * 60 * 24 * 7;\r\n\r\n// Set session cookie\r\nexport async function setSessionCookie(idToken: string) {\r\n  const cookieStore = await cookies();\r\n\r\n  // Create session cookie\r\n  const sessionCookie = await auth.createSessionCookie(idToken, {\r\n    expiresIn: SESSION_DURATION * 1000, // milliseconds\r\n  });\r\n\r\n  // Set cookie in the browser\r\n  cookieStore.set(\"session\", sessionCookie, {\r\n    maxAge: SESSION_DURATION,\r\n    httpOnly: true,\r\n    secure: process.env.NODE_ENV === \"production\",\r\n    path: \"/\",\r\n    sameSite: \"lax\",\r\n  });\r\n}\r\n\r\nexport async function signUp(params: SignUpParams) {\r\n  const { uid, name, email } = params;\r\n\r\n  try {\r\n    // check if user exists in db\r\n    const userRecord = await db.collection(\"users\").doc(uid).get();\r\n    if (userRecord.exists)\r\n      return {\r\n        success: false,\r\n        message: \"User already exists. Please sign in.\",\r\n      };\r\n\r\n    // save user to db\r\n    await db.collection(\"users\").doc(uid).set({\r\n      name,\r\n      email,\r\n      // profileURL,\r\n      // resumeURL,\r\n    });\r\n\r\n    return {\r\n      success: true,\r\n      message: \"Account created successfully. Please sign in.\",\r\n    };\r\n  } catch (error: any) {\r\n    console.error(\"Error creating user:\", error);\r\n\r\n    // Handle Firebase specific errors\r\n    if (error.code === \"auth/email-already-exists\") {\r\n      return {\r\n        success: false,\r\n        message: \"This email is already in use\",\r\n      };\r\n    }\r\n\r\n    return {\r\n      success: false,\r\n      message: \"Failed to create account. Please try again.\",\r\n    };\r\n  }\r\n}\r\n\r\nexport async function signIn(params: SignInParams) {\r\n  const { email, idToken } = params;\r\n\r\n  try {\r\n    const userRecord = await auth.getUserByEmail(email);\r\n    if (!userRecord)\r\n      return {\r\n        success: false,\r\n        message: \"User does not exist. Create an account.\",\r\n      };\r\n\r\n    await setSessionCookie(idToken);\r\n  } catch (error: any) {\r\n    console.log(\"\");\r\n\r\n    return {\r\n      success: false,\r\n      message: \"Failed to log into account. Please try again.\",\r\n    };\r\n  }\r\n}\r\n\r\n// Sign out user by clearing the session cookie\r\nexport async function signOut() {\r\n  const cookieStore = await cookies();\r\n\r\n  cookieStore.delete(\"session\");\r\n}\r\n\r\n// Get current user from session cookie\r\nexport async function getCurrentUser(): Promise<User | null> {\r\n  const cookieStore = await cookies();\r\n\r\n  const sessionCookie = cookieStore.get(\"session\")?.value;\r\n  if (!sessionCookie) return null;\r\n\r\n  try {\r\n    const decodedClaims = await auth.verifySessionCookie(sessionCookie, true);\r\n\r\n    // get user info from db\r\n    const userRecord = await db\r\n      .collection(\"users\")\r\n      .doc(decodedClaims.uid)\r\n      .get();\r\n    if (!userRecord.exists) return null;\r\n\r\n    return {\r\n      ...userRecord.data(),\r\n      id: userRecord.id,\r\n    } as User;\r\n  } catch (error) {\r\n    console.log(error);\r\n\r\n    // Invalid or expired session\r\n    return null;\r\n  }\r\n}\r\n\r\n// Check if user is authenticated\r\nexport async function isAuthenticated() {\r\n  const user = await getCurrentUser();\r\n  return !!user;\r\n}\r\n\r\nexport async function logout(){\r\n  try{\r\n    const cookieStore = await cookies();\r\n    cookieStore.delete(\"session\");\r\n   \r\n  } catch(err){\r\n    \r\n    return{\r\n      success: false, \r\n      message: \"Logout failed. Please try again.\" \r\n    }\r\n\r\n  }\r\n  return {\r\n    success: true,\r\n    message: \"Logged out successfully\",\r\n  };\r\n\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 234, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS/Desktop/Hackhazards%20AI/interview-platform/components/LogoutButton.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/LogoutButton.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/LogoutButton.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA+R,GAC5T,6DACA","debugId":null}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS/Desktop/Hackhazards%20AI/interview-platform/components/LogoutButton.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/LogoutButton.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/LogoutButton.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA2Q,GACxS,yCACA","debugId":null}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 272, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS/Desktop/Hackhazards%20AI/interview-platform/app/%28root%29/layout.tsx"],"sourcesContent":["import Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { ReactNode } from \"react\";\r\nimport { redirect } from \"next/navigation\";\r\nimport { isAuthenticated } from \"@/lib/actions/auth.action\";\r\nimport LogoutButton from \"@/components/LogoutButton\"; // << import this\r\n\r\nconst Layout = async ({ children }: { children: ReactNode }) => {\r\n  const isUserAuthenticated = await isAuthenticated();\r\n  if (!isUserAuthenticated) redirect(\"/sign-up\");\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col items-center justify-between relative\">\r\n      {/* Navbar */}\r\n      <nav className=\"w-full max-w-screen-xl flex items-center justify-between px-6 py-4 m-5 rounded-2xl bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 shadow-md z-50\">\r\n        {/* Left: Logo */}\r\n        <div className=\"flex items-center gap-2\">\r\n          <Link href=\"/\" className=\"flex items-center gap-2 text-xl font-semibold text-gray-800 dark:text-white\">\r\n            <Image src=\"/logo2.png\" alt=\"logo\" width={40} height={40} className=\"rounded-full\" />\r\n            <span>SmartHire-AI</span>\r\n          </Link>\r\n        </div>\r\n\r\n        {/* Middle: Navigation Links */}\r\n        <div className=\"hidden md:flex gap-8 flex-1 justify-center\">\r\n          <Link href=\"/\" className=\"text-gray-700 dark:text-gray-200 hover:text-blue-600 transition font-medium cursor-pointer\">\r\n            Home\r\n          </Link>\r\n          <Link href=\"/allinterviews\" className=\"text-gray-700 dark:text-gray-200 hover:text-blue-600 transition font-medium cursor-pointer\">\r\n            All Interviews\r\n          </Link>\r\n          <Link href=\"/interview\" className=\"text-gray-700 dark:text-gray-200 hover:text-blue-600 transition font-medium cursor-pointer\">\r\n            Make Interview\r\n          </Link>\r\n        </div>\r\n\r\n        {/* Right: Logout */}\r\n        <div className=\"flex items-center gap-4\">\r\n          <LogoutButton /> {/* use client logout button */}\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Main content */}\r\n      <main className=\"flex-1 md:px-8 z-10\">{children}</main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAEA;AAAA;AACA;AACA,2NAAsD,iBAAiB;;;;;;;;;;;AAEvE,MAAM,SAAS,OAAO,EAAE,QAAQ,EAA2B;IACzD,MAAM,sBAAsB,MAAM,CAAA,GAAA,gIAAA,CAAA,kBAAe,AAAD;IAChD,IAAI,CAAC,qBAAqB,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;4BAAI,WAAU;;8CACvB,8OAAC,6HAAA,CAAA,UAAK;oCAAC,KAAI;oCAAa,KAAI;oCAAO,OAAO;oCAAI,QAAQ;oCAAI,WAAU;;;;;;8CACpE,8OAAC;8CAAK;;;;;;;;;;;;;;;;;kCAKV,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAI,WAAU;0CAA6F;;;;;;0CAGtH,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAiB,WAAU;0CAA6F;;;;;;0CAGnI,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAa,WAAU;0CAA6F;;;;;;;;;;;;kCAMjI,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,2HAAA,CAAA,UAAY;;;;;4BAAG;;;;;;;;;;;;;0BAKpB,8OAAC;gBAAK,WAAU;0BAAuB;;;;;;;;;;;;AAG7C;uCAEe","debugId":null}}]
}